<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  <title>{{ site_title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
  <div class="shell">
    <header class="terminal-header">
      <div class="logo-stack">
        <div class="logo-main">{{ site_title|lower }}</div>
        <div class="logo-sub" data-l10n="tagline"></div>
      </div>
      <div class="header-meta">
        <span id="clock">--:--:--</span>
        <span class="pill pill-offline" id="internet-pill">
          <span class="pill-dot"></span>
          <span id="internet-pill-text">ç½‘ç»œæ£€æµ‹ä¸­â€¦</span>
        </span>
        <div class="toggle-group">
          <button class="pill slim pill-toggle" id="theme-toggle" type="button">å¤œé—´æ¨¡å¼</button>
          <button class="pill slim pill-toggle" id="lang-toggle" type="button">English</button>
        </div>
      </div>
    </header>

    <section class="section-block">
      <div class="section-title" data-l10n="section_signal">ä¿¡å·ç›‘æ§</div>
      <div class="grid status-grid">
        <article class="card summary-card" id="internet-card">
          <div class="card-accent"></div>
          <div class="card-header">
            <div class="card-title" data-l10n="card_internet_title">ç½‘ç»œå¥åº·</div>
            <div class="card-meta">
              <span class="status-dot"></span>
              <span class="metric" id="internet-rtt">avg rtt --</span>
            </div>
          </div>
          <div class="card-body">
            <div class="kv-line">
              <span class="kv-key" data-l10n="internet_state_label">çŠ¶æ€</span>
              <span class="kv-val" id="internet-status">checkingâ€¦</span>
            </div>
            <div class="kv-line">
              <span class="kv-key" data-l10n="internet_targets_label">ç›‘æµ‹ç›®æ ‡</span>
              <span class="kv-val" id="internet-targets">--</span>
            </div>
            <div class="kv-line">
              <span class="kv-key" data-l10n="internet_updated_label">æ›´æ–°æ—¶é—´</span>
              <span class="kv-val" id="internet-updated">--</span>
            </div>
            <div class="internet-services" id="internet-services" data-l10n="upstream_probe">æ­£åœ¨æ¢æµ‹ä¸Šæ¸¸æœåŠ¡â€¦</div>
          </div>
        </article>
        <article class="card summary-card" id="weather-card">
          <div class="card-accent"></div>
          <div class="card-header">
            <div class="card-title" data-l10n="card_weather_title">å¤©æ°”</div>
            <div class="card-meta">
              <span class="metric muted" id="weather-detail"></span>
            </div>
          </div>
          <div class="card-body large">
            <div class="weather-main">
              <div class="weather-temp" id="weather-temp">--Â°C</div>
              <div class="weather-status">
                <div class="weather-icon" id="weather-icon">â˜€ï¸</div>
                <div>
                  <div class="weather-condition" id="weather-condition" data-l10n="weather_condition_unknown">æœªçŸ¥å¤©æ°”</div>
                  <div class="weather-dayphase" id="weather-dayphase" data-l10n="weather_day_label">ç™½å¤©</div>
                </div>
              </div>
            </div>
            <p class="kv-val subtle small" data-l10n="weather_source_hint">Openâ€‘Meteo Â· è‡ªåŠ¨åˆ·æ–°</p>
            <div class="hourly-forecast" id="hourly-forecast" data-l10n="hourly_unavailable">æš‚æ— å°æ—¶çº§é¢„æŠ¥</div>
            <div class="aurora-status" id="aurora-status" data-l10n="aurora_unavailable">æå…‰çŠ¶æ€æœªçŸ¥</div>
          </div>
        </article>
        {# TrendRadar placeholder reserved for future integration #}
        {# <article class="card summary-card trend-card">
          <div class="card-accent"></div>
          <div class="card-header">
            <div class="card-title" data-l10n="card_trend_title">TrendRadar</div>
            <div class="card-meta"><span class="metric muted" data-l10n="trend_meta">é¢„ç•™</span></div>
          </div>
          <div class="card-body">
            <p data-l10n="trend_placeholder" data-l10n-html="true">ğŸš§ è¿™é‡Œé¢„ç•™ GitHub TrendRadar åŒºå—ï¼Œç›®å‰ä»…æä¾›é“¾æ¥ã€‚</p>
          </div>
          <div class="card-footer">
            <a href="https://github.com/" target="_blank" rel="noopener" class="text-link" data-l10n="trend_link">æ‰“å¼€ TrendRadar â†—</a>
          </div>
        </article> #}
      </div>
    </section>

    <section class="section-block">
      <div class="section-title" data-l10n="section_lan">LAN å¯¼èˆª / Favorites</div>
      {% for category, svc_list in categories.items() %}
      <div class="category-patch">{{ category }}</div>
      <div class="grid service-grid">
        {% for svc in svc_list %}
        <article class="card service-card" data-service-name="{{ svc.name }}" data-service-type="{{ svc.type }}">
          <div class="card-accent"></div>
          <div class="card-header">
            <div class="card-title">
              {{ (svc.icon ~ ' Â· ') if svc.icon }}{{ svc.name }}
            </div>
            <div class="card-meta">
              <span class="status-dot status-unknown"></span>
              <span class="metric status-metric">--</span>
            </div>
          </div>
          <div class="card-body">
            <div class="kv-line">
              <span class="kv-key" data-l10n="kv_type">ç±»å‹</span>
              <span class="kv-val">{{ svc.type }}</span>
            </div>
            {% if svc.url %}
            <div class="kv-line">
              <span class="kv-key" data-l10n="kv_endpoint">Endpoint</span>
              <span class="kv-val">{{ svc.url }}</span>
            </div>
            {% elif svc.host %}
            <div class="kv-line">
              <span class="kv-key" data-l10n="kv_host">Host</span>
              <span class="kv-val">{{ svc.host }}{% if svc.port %}:{{ svc.port }}{% endif %}</span>
            </div>
            {% endif %}
            <div class="kv-line">
              <span class="kv-key" data-l10n="kv_importance">ä¼˜å…ˆçº§</span>
              <span class="kv-val importance-label" data-l10n-variant="{{ 'importance_core' if svc.important else 'importance_normal' }}">{{ 'æ ¸å¿ƒ' if svc.important else 'æ™®é€š' }}</span>
            </div>
          </div>
          <div class="card-footer">
            <span class="tag">
              <span class="tag-dot"></span>
              {{ svc.category }}
            </span>
            {% if svc.url %}
            <a href="{{ svc.url }}" target="_blank" rel="noopener" class="text-link" data-l10n="link_open">æ‰“å¼€ â†—</a>
            {% else %}
            <span class="text-link disabled" data-l10n="link_no_ui">æ— ç•Œé¢</span>
            {% endif %}
          </div>
        </article>
        {% endfor %}
      </div>
      {% endfor %}
    </section>

    <section class="section-block">
      <div class="section-title" data-l10n="section_alerts">å¼‚å¸¸æœåŠ¡ / Alerts</div>
      <div id="alerts-body" class="alerts-panel" data-l10n="loading">åŠ è½½ä¸­â€¦</div>
    </section>

    <section class="section-block">
      <div class="section-title table-title">
        <span data-l10n="section_table">å…¨éƒ¨æœåŠ¡çŸ©é˜µ</span>
        <button id="toggle-table" type="button" class="pill slim pill-toggle" data-l10n="toggle_table">æŠ˜å  / å±•å¼€</button>
      </div>
      <div id="table-wrapper" class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th data-l10n="table_name">åç§°</th>
              <th data-l10n="table_category">ç±»åˆ«</th>
              <th data-l10n="table_type">ç±»å‹</th>
              <th data-l10n="table_status">çŠ¶æ€</th>
              <th data-l10n="table_metric">å»¶è¿Ÿ / çŠ¶æ€ç </th>
              <th data-l10n="table_last_change">last_change</th>
            </tr>
          </thead>
          <tbody id="services-table-body">
            {% for svc in services %}
            <tr data-service-name="{{ svc.name }}">
              <td>{{ svc.name }}</td>
              <td>{{ svc.category }}</td>
              <td>{{ svc.type|upper }}</td>
              <td class="status-cell">--</td>
              <td class="metric-cell">--</td>
              <td class="change-cell">--</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </div>

  <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
</body>
</html>
